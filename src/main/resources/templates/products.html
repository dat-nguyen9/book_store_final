<!doctype html>
<html class="no-js" lang=""
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Book Library</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <th:block th:replace="layout_customer/head :: head"></th:block>
</head>
<body>

<div id="tg-wrapper" class="tg-wrapper tg-haslayout">
    <!--************************************
            Header Start
    *************************************-->
    <div th:include="layout_customer/navbar:: navbar"></div>
    <!--************************************
            Header End
    *************************************-->
    <!--************************************
            Inner Banner Start
    *************************************-->
    <div class="tg-innerbanner tg-haslayout tg-parallax tg-bginnerbanner" data-z-index="-100"
         data-appear-top-offset="600" data-parallax="scroll"
         th:attr="data-image-src=@{/images/parallax/bgparallax-07.jpg}">
        <div class="container">
            <div class="row">
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <div class="tg-innerbannercontent">
                        <h1>Tất cả sản phẩm</h1>
                        <ol class="tg-breadcrumb">
                            <li><a href="javascript:void(0);">Trang chủ</a></li>
                            <li class="tg-active">Sản phẩm</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--************************************
            Inner Banner End
    *************************************-->
    <!--************************************
            Main Start
    *************************************-->
    <main id="tg-main" class="tg-main tg-haslayout">
        <!--************************************
                News Grid Start
        *************************************-->
        <div class="tg-sectionspace tg-haslayout">
            <div class="container">
                <div class="row">
                    <div id="tg-twocolumns" class="tg-twocolumns">
                        <div class="col-xs-12 col-sm-8 col-md-8 col-lg-9 pull-right">
                            <div id="tg-content" class="tg-content">
                                <div class="tg-products">
                                    <div class="tg-sectionhead">
                                        <h2><span>Sự lựa chọn của mọi người</span>Sách bán chạy nhất</h2>
                                    </div>
                                    <div class="tg-featurebook alert" role="alert">
                                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                        <div class="tg-featureditm">
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4 hidden-sm hidden-xs">
                                                    <figure><img th:src="@{/images/img-04.png}" alt="image description">
                                                    </figure>
                                                </div>
                                                <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8">
                                                    <div class="tg-featureditmcontent">
                                                        <div class="tg-themetagbox"><span
                                                                class="tg-themetag">featured</span></div>
                                                        <div class="tg-booktitle">
                                                            <h3><a href="javascript:void(0);">Một cuốn sách hay mở ra, ta thấy một thế giới mới</a></h3>
                                                        </div>
                                                        <span class="tg-bookwriter">Tác giả: <a
                                                                href="javascript:void(0);">Victor Hugo</a></span>
                                                        <div class="tg-priceandbtn">
																<span class="tg-bookprice">
																	<ins>23,000 VND</ins>
																	<del>30,000 VND</del>
																</span>
                                                            <a class="tg-btn tg-btnstyletwo tg-active"
                                                               href="javascript:void(0);">
                                                                <i class="fa fa-shopping-basket"></i>
                                                                <em>Thêm vào giỏ</em>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tg-productgrid">
                                        <div class="tg-refinesearch">
                                            <span>Tổng số mặt hàng: [[${totalItems}]] - Hiển thị trang: [[${currentPage}]] trên [[${totalPages}]] </span>
                                            <form class="tg-formtheme tg-formsortshoitems">
                                                <fieldset>
                                                    <div class="form-group">
                                                        <label>Sắp xếp: </label>
                                                        <span class="tg-select">
																<select style="margin-left: 10px;" id="sortSelect"
                                                                        onchange="location = this.value;">
    <option value="#" th:selected="${sortField == null}">-- Chọn một tùy chọn --</option>
    <option th:value="@{'/product/listproducts/'+${currentPage}+'?categoryId='+${categoryId}+'&sortField=price&sortDir='+ asc+'&keyword='+${keyword}}"
            th:selected="${sortField == 'price' and sortDir == 'asc'}">
        Giá từ thấp đến cao
    </option>
    <option th:value="@{'/product/listproducts/'+${currentPage}+'?categoryId='+${categoryId}+'&sortField=price&sortDir='+ desc+'&keyword='+${keyword}}"
            th:selected="${sortField == 'price' and sortDir == 'desc'}">
        Giá từ cao đến thấp
    </option>
    <option th:value="@{'/product/listproducts/'+${currentPage}+'?categoryId='+${categoryId}+'&sortField=createdAt&sortDir='+ asc+'&keyword='+${keyword}}"
            th:selected="${sortField == 'createdAt' and sortDir == 'asc'}">
        Sản phẩm mới nhất
    </option>
    <option th:value="@{'/product/listproducts/'+${currentPage}+'?categoryId='+${categoryId}+'&sortField=createdAt&sortDir='+ desc+'&keyword='+${keyword}}"
            th:selected="${sortField == 'createdAt' and sortDir == 'desc'}">
        Sản phẩm cũ hơn
    </option>
</select>

															</span>
                                                    </div>
                                                </fieldset>
                                            </form>
                                        </div>
                                        <div th:each="product : ${listproduct}">
                                            <div class="col-xs-6 col-sm-6 col-md-4 col-lg-3">
                                                <div class="tg-postbook">
                                                    <figure class="tg-featureimg">
                                                        <div class="tg-bookimg">
                                                            <div class="tg-frontcover"><img th:src="${product.getImage()}" alt="image description"></div>
                                                            <div class="tg-backcover"><img th:src="${product.getImage()}" alt="image description"></div>
                                                        </div>
                                                        <a class="tg-btnaddtowishlist" sec:authorize="!isAuthenticated()"
                                                           th:href="@{'/cart/addtoCart/'+${product.id}}">
                                                            <i class="fa fa-shopping-basket"></i>
                                                            <span>Thêm vào giỏ</span>
                                                        </a>
                                                    </figure>
                                                    <div class="tg-postbookcontent">
                                                        <ul class="tg-bookscategories">
                                                            <li><a th:href="@{'/product/listproducts/1?categoryId='+${product.getCategory().getId()}+'&sortField='
                                +${sortField}+'&sortDir='+ ${sortDir}+'&keyword= '}"><p
                                                                    th:text="${product.getCategory().getName()}"></p>
                                                            </a></li>
                                                        </ul>
                                                        <div class="tg-themetagbox"><span
                                                                class="tg-themetag">sale</span></div>
                                                        <div class="tg-booktitle">
                                                            <a th:href="@{'/product/productdetail/'+${product.id}}">
                                                                <h3 style="overflow: hidden;
                                                                white-space: nowrap;
                                                                text-overflow: ellipsis;
                                                                width: 200px;" th:text="${product.name}"></h3>
                                                            </a>
                                                        </div>
                                                        <span class="tg-bookwriter">Tác giả: <a th:text="${product.getAuthor()}"></a></span>
                                                        <span class="tg-bookprice">
															<ins class="price" th:text="${product.price.longValue()} + ' VND'"
                                                                 th:attr="data-price=${product.price.longValue()}"></ins>
														</span>
                                                        <a class="tg-btn tg-btnstyletwo"
                                                           sec:authorize="hasRole('CUSTOMER')"
                                                           th:href="@{'/cart/addtoCart/'+${product.id}}">
                                                            <i class="fa fa-shopping-basket"></i>
                                                            <em>Thêm vào giỏ</em>
                                                        </a>
                                                        <a class="tg-btn tg-btnstyletwo"
                                                           sec:authorize="!isAuthenticated()"
                                                           th:href="@{'/cart/addtoCart/'+${product.id}}">
                                                            <i class="fa fa-shopping-basket"></i>
                                                            <em>Thêm vào giỏ</em>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="text-center">
                                <nav class="pagination justify-content-center flex-wrap">
                                    <th:block th:if="${totalItems > 0 && totalPages>1}">
                                        <li th:class="${currentPage > 1 ? 'page-item' : 'page-item disabled'}">
                                            <a th:href="@{'/product/listproducts/1'+ ${query}}"
                                               class="page-link">Đầu</a>
                                        </li>
                                        <li th:if="${currentPage>1}"
                                            th:class="${currentPage > 1 ? 'page-item' : 'page-item disabled'}">
                                            <a th:href="@{'/product/listproducts/'+${currentPage - 1}+ ${query}}"
                                               class="page-link">Trước</a>
                                        </li>
                                        <th:block th:if="${totalPages <= 10}">
                                            <li th:each="i:${#numbers.sequence(1,totalPages)}" class="page-item">
                                                <a th:href="@{'/product/listproducts/'+${i}+ ${query}}"
                                                   class="page-link"> [[${i}]]</a>
                                            </li>
                                        </th:block>
                                        <th:block th:if="${totalPages > 10}">
                                            <th:block th:if="${currentPage <= 3 ||currentPage > totalPages -3}">
                                                <li th:each="i:${#numbers.sequence(1,3)}" class="page-item">
                                                    <a th:href="@{'/product/listproducts/'+${i}+ ${query}}"
                                                       class="page-link"> [[${i}]]</a>
                                                </li>
                                                <li>
                                                    <a th:href="@{'/product/listproducts/4' + ${query}}"
                                                       class="page-link">...</a>
                                                </li>
                                                <li th:each="i:${#numbers.sequence(totalPages - 2,totalPages)}"
                                                    class="page-item">
                                                    <a th:href="@{'/product/listproducts/'+${i}+ ${query}}"
                                                       class="page-link"> [[${i}]]</a>
                                                </li>
                                            </th:block>
                                            <th:block th:if="${currentPage > 3 && currentPage <= totalPages -3}">
                                                <li>
                                                    <a th:href="@{'/product/listproducts/'+${currentPage - 3}+ ${query}}"
                                                       class="page-link">...</a>
                                                </li>
                                                <li th:each="i:${#numbers.sequence(currentPage - 2,currentPage + 2)}"
                                                    class="page-item">
                                                    <a th:href="@{'/product/listproducts/'+${i}+ ${query}}"
                                                       class="page-link"> [[${i}]]</a>
                                                </li>
                                                <li>
                                                    <a th:href="@{'/product/listproducts/'+${currentPage + 3}+ ${query}}"
                                                       class="page-link">...</a>
                                                </li>
                                            </th:block>
                                        </th:block>
                                        <li th:if="${currentPage<totalPages}"
                                            th:class="${currentPage < totalPages ? 'page-item' : 'page-item disabled'}">
                                            <a th:href="@{'/product/listproducts/'+${currentPage + 1}+ ${query}}"
                                               class="page-link">Sau</a>
                                        </li>
                                        <li th:class="${currentPage < totalPages ? 'page-item' : 'page-item disabled'}">
                                            <a th:href="@{'/product/listproducts/'+${totalPages} + ${query}}"
                                               class="page-link">Cuối</a>
                                        </li>
                                    </th:block>
                                </nav>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-4 col-md-4 col-lg-3 pull-left">
                            <aside id="tg-sidebar" class="tg-sidebar">
                                <div class="tg-widget tg-catagories">
                                    <div class="tg-widgettitle">
                                        <h3>Danh mục</h3>
                                    </div>
                                    <div class="tg-widgetcontent">
                                        <ul>
                                            <li th:each="category:${categoryList}">
                                                <a th:href="@{'/product/listproducts/1?categoryId='+${category.getId()}+'&sortField='
                                +${sortField}+'&sortDir='+ ${sortDir}+'&keyword= '}"><span
                                                        th:text="${category.getName()}"></span>
                                                    <em th:text="${category.products.size()}"></em></a></li>
                                            <li><a th:href="@{'/product/listproducts/1?categoryId=-1&sortField='
                                +${sortField}+'&sortDir='+ ${sortDir}+'&keyword= '}"><span>Tất cả sách</span></a></li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="tg-widget tg-widgettrending">
                                    <div class="tg-widgettitle">
                                        <h3>Sản phẩm thịnh hành</h3>
                                    </div>
                                    <div class="tg-widgetcontent">
                                        <ul>
                                            <li th:each="product:${product_hot}">
                                                <article class="tg-post">
                                                    <figure><a href="javascript:void(0);"><img
                                                            th:src="${product.getImage()}"
                                                            alt="image description"></a></figure>
                                                    <div class="tg-postcontent">
                                                        <div class="tg-posttitle">
                                                            <h3><a th:href="@{'/product/productdetail/'+${product.id}}">
                                                                <p
                                                                    th:text="${product.name}">

                                                                </p></a></h3>
                                                        </div>
                                                        <span class="tg-bookwriter">Tác giả: <a th:text="${product.getAuthor()}"></a></span>
                                                    </div>
                                                </article>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </aside>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--************************************
                News Grid End
        *************************************-->
    </main>
    <!--************************************
            Main End
    *************************************-->
    <!--************************************
            Footer Start
    *************************************-->
    <th:block th:replace="layout_customer/footer :: footer_customer"></th:block>
    <!--************************************
            Footer End
    *************************************-->
</div>
<!--************************************
        Wrapper End
*************************************-->
<th:block th:replace="layout_customer/js :: js"></th:block>
</body>

</html>
